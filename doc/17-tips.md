# 使用技巧

## Bot 创建技巧

### 善用模板

创建 Bot 时优先选择合适的模板。模板会预配置系统提示词和工具集，省去手动配置的时间。创建后你仍然可以在设置中自由修改。

### personal vs public

- 如果只给自己用，选 `personal`。Personal Bot 只在私聊中工作，即使被拉入群聊也不会响应。
- 如果需要多人使用或在群聊中工作，选 `public`。

## 对话技巧

### 让 Bot 创建定时任务

直接在对话中告诉 Bot 你的需求，Bot 会自动调用工具创建：
> "每周一早上 9 点给我发一份本周待办清单"

### 让 Bot 搜索网页

如果配置了搜索提供方，Bot 可以实时搜索信息：
> "帮我搜索一下最近关于 AI Agent 的新闻"

### 中断不想要的回复

Bot 回复过长时，点击停止按钮（发送按钮变成的旋转图标）即可中断。已接收的部分内容会保留。

## 记忆管理技巧

### 手动编辑记忆纠正认知

如果 Bot 记住了错误的信息，可以到记忆标签直接编辑或删除对应记忆。

### 定期压缩记忆

记忆数量增长后会影响检索效率。建议定期使用压缩功能：
- 比例 0.8：轻度压缩，保留大部分细节。
- 比例 0.5：中度压缩，合并相似内容。
- 比例 0.3：重度压缩，只保留核心信息。

## Telegram 群聊技巧

### 多 Bot 协同

将多个 Bot 拉入同一个 Telegram 群：
1. 给需要自由发言的 Bot 关闭"群聊需要 @提及"。
2. 发送消息后，这些 Bot 都会各自回复。
3. Bot 之间不会互相触发（自动防循环），避免 Token 浪费。

### 手动触发 Bot 间对话

如果需要 Bot B 回应 Bot A 的内容：
- **引用 Bot A 的消息，并 @Bot B**。
- 此时 Bot B 会被触发并回复。
- @提及和引用回复始终有效，不受 `is_from_bot` 限制。

### 关闭 Privacy Mode

如果 Bot 在群里不响应任何消息，检查 Telegram 的 Privacy Mode：
1. @BotFather → `/mybots` → 选择 Bot → Bot Settings → Group Privacy → Turn off。
2. 关闭后才能接收群内所有消息。

## 模型配置技巧

### 选择合适的模型

- **对话模型**：决定 Bot 的智能程度和回复质量。推荐按需选择（如日常对话用 `gpt-4o-mini`，复杂任务用 `gpt-4o` 或 `claude-3.5-sonnet`）。
- **嵌入模型**：影响记忆搜索的准确性。通常选择提供方推荐的嵌入模型即可。
- **记忆模型**：用于提取和整理记忆，不需要最强的模型，中等能力的模型即可胜任。

### 使用 OpenAI 兼容 API

很多第三方服务（如各种 API 转发服务）兼容 OpenAI 格式。添加提供方时选择 `openai-compat` 类型，填入对应的 API Base URL 和 Key 即可使用。

## 容器技巧

### 快照备份

在修改 Bot 的人格文件之前，先创建一个快照。如果修改效果不好，可以随时恢复到之前的状态。

### 重建容器

如果 Bot 的容器出现异常（概览页检查项报错），可以尝试：
1. 停止容器。
2. 删除容器。
3. 重新创建容器。

容器重建后会重新初始化，但记忆和设置不受影响（它们存储在数据库中）。

## Token 节省技巧

### 监控 Token 用量

定期查看 Token 用量页面，关注：
- 哪个 Bot 消耗最多。
- 哪个模型消耗最多。
- 是否有异常的用量增长。

### 群聊场景注意

关闭"群聊需要 @提及"会让 Bot 回复群内所有消息，Token 消耗会显著增加。建议：
- 只在需要的 Bot 上关闭此设置。
- 通过 Token 用量页面监控消耗。
- 在测试期过后考虑重新开启。

## 系统维护技巧

### 定期运行诊断

系统设置中的诊断功能可以快速发现问题。如果 Bot 响应异常，先运行诊断确认各服务是否正常。

### 时区设置

部署后第一件事就是设置正确的时区，避免定时任务在错误的时间触发。
