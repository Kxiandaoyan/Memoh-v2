# MCP 工具与技能

## MCP 工具

Bot 详情页 → **MCP** 标签，管理 Bot 可用的 MCP（Model Context Protocol）工具。

### 内置工具

每个 Bot 自带 15 个内置工具，无需额外配置即可使用：

| 工具 | 说明 |
|------|------|
| read | 读取容器内的文件 |
| write | 写入文件到容器 |
| list | 列出容器内的目录内容 |
| edit | 编辑容器内的文件 |
| exec | 在容器内执行命令 |
| send | 主动向用户发送消息 |
| react | 对消息做出回应 |
| lookup_channel_user | 查询渠道用户信息 |
| search_memory | 搜索 Bot 的记忆库 |
| web_search | 使用搜索引擎进行网页搜索 |
| create_schedule | 创建定时任务 |
| update_schedule | 更新定时任务 |
| delete_schedule | 删除定时任务 |
| list_schedules | 列出所有定时任务 |
| get_schedule | 获取定时任务详情 |

在 MCP 标签页中，内置工具区域默认折叠，点击可展开查看完整列表和说明。

### 外部 MCP 服务器

除了内置工具，你还可以接入外部 MCP 服务器来扩展 Bot 的能力。

#### 添加方式

点击页面顶部的 **添加** 按钮，有两种方式：

**单个添加**：手动填写服务器信息。

**批量导入**：粘贴 JSON 配置（`mcpServers` 格式）一次导入多个。

#### 连接模式

| 模式 | 说明 | 配置字段 |
|------|------|----------|
| stdio | 本地进程通信 | 命令(command)、参数(args)、环境变量(env)、工作目录(cwd) |
| remote | 远程 HTTP/SSE | URL、请求头(headers)、传输协议(http/sse) |

#### 配置字段详解

**stdio 模式**：
- **名称**：MCP 服务器的标识名。
- **命令**：启动 MCP 服务器的命令（如 `npx`、`python`）。
- **参数**：命令参数，以标签形式添加。
- **环境变量**：键值对格式的环境变量。
- **工作目录**：命令执行的工作目录。

**remote 模式**：
- **名称**：标识名。
- **URL**：MCP 服务器的 HTTP 地址。
- **请求头**：键值对格式的 HTTP 请求头。
- **传输协议**：`http` 或 `sse`。

#### 管理操作

- **启用/停用**：每个外部服务器有独立的 active 开关。
- **编辑**：修改后支持表单和 JSON 双向同步编辑。
- **批量操作**：通过复选框选择多个服务器，支持批量导出和删除。
- **导出**：将选中的服务器配置导出为 JSON 格式。

## 技能管理

Bot 详情页 → **技能** 标签，管理 Bot 的自定义技能。

技能是一段 Markdown 格式的指令，用于教会 Bot 如何执行特定任务。

### 查看技能

技能以卡片列表展示，每张卡片显示：
- 技能名称
- 描述

点击卡片可以查看技能的完整内容（只读模式）。

### 创建技能

点击 **创建** 按钮，填写：
- **名称**：技能标识。
- **描述**：简要说明技能用途。
- **内容**：Markdown 格式的技能指令，定义 Bot 应该如何执行该技能。

### 删除技能

在技能卡片上点击删除按钮即可移除技能。
