# 自进化与心跳

## 自进化 (Self Evolution)

Bot 详情页 → **进化** 标签，查看和管理 Bot 的自进化机制。

### 什么是自进化

自进化是 Memoh 的核心特色功能。开启后，Bot 会定期反思自身的对话表现，自动调整和优化自己的人格文件（IDENTITY.md、SOUL.md 等）和行为策略。

自进化的流程：
1. 心跳触发进化任务。
2. Bot 分析近期对话和实验记录。
3. Bot 决定是否需要调整自身配置。
4. 如果需要，Bot 自动修改人格文件。
5. 记录实验结果到 EXPERIMENTS.md。

### 进化状态面板

页面顶部显示：
- **进化开关**：显示自进化是否已开启。要开启或关闭，请到 **设置** 标签修改 "允许自进化" 开关。
- **进化间隔**：两次进化之间的时间间隔。
- **手动触发**：点击按钮可以立即触发一次进化。

### 实验记录

从 EXPERIMENTS.md 文件中解析并展示 Bot 的实验历史，每条记录包含：
- **标题**
- **目标**
- **结果**（成功/失败标签）
- **收获**

### 进化历史

以时间线形式展示每次进化的：
- **状态**：completed（已完成）、skipped（已跳过）、failed（失败）、running（进行中）
- **执行时间**
- **Agent 响应**：可展开查看 Bot 在该次进化中的完整思考和操作

支持分页加载更多历史记录。

### 人格文件查看

进化标签页底部可以直接查看 Bot 的人格文件：
- IDENTITY.md
- SOUL.md
- TOOLS.md
- EXPERIMENTS.md
- NOTES.md

点击文件名按钮切换查看不同文件的内容。

## 心跳 (Heartbeat)

Bot 详情页 → **心跳** 标签，配置心跳触发器。

### 什么是心跳

心跳是一种定时触发机制。Bot 可以拥有多个心跳配置，每个心跳按照设定的时间间隔执行指定的提示词（prompt），用于：
- 触发自进化
- 执行定期维护任务
- 定期检查和处理信息

### 心跳类型

系统根据提示词内容自动识别心跳类型：
- **evolution**：进化类心跳
- **maintenance**：维护类心跳
- **custom**：自定义心跳

### 创建心跳

点击 **创建** 按钮，填写：

| 字段 | 说明 |
|------|------|
| 启用 | 开关控制是否激活此心跳 |
| 间隔（秒） | 两次触发之间的时间间隔 |
| 提示词 | 每次心跳触发时发送给 Bot 的指令 |
| 事件触发器 | 额外的触发条件 |

### 事件触发器

除了定时触发，心跳还可以在特定事件发生时触发：

| 事件 | 说明 |
|------|------|
| message_created | 收到新消息时触发 |
| schedule_completed | 定时任务执行完成时触发 |

### 心跳列表

每个心跳卡片显示：
- 启用状态（绿色/灰色徽标）
- 类型徽标（evolution / maintenance / custom）
- 时间间隔（以人类可读的格式显示，如 "2 小时"、"30 分钟"）
- 提示词预览
- 事件触发器列表（如果有）

### 编辑和删除

点击心跳卡片可以编辑配置，或通过删除按钮移除。
